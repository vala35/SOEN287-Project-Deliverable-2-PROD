<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Provider Login | OneLicense Software Management </title>
    <link rel="stylesheet" href="auth_style.css">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>

<body>
    <header>
        <a href="/index.html">   
        <div class="logobox"></div></a>
    </header>
<h1>Provider Portal Login</h1>
    <main>
        <!-- Simple login form. No action yet -->
        <div class ="Login">
            <form onsubmit="return false">
                <label for="email"> Email Address</label><br>
                <input id="email" type="email" name="email" required><br>
                <label for="PW">Password</label><br>
                <input id="password" type="password" name="password" required><br><br>
                <input type="submit" onclick="login()" value="Log in">
            </form>
        </div>

        <script>
            function login(){
                fetch('/auth-form/login/provider', {
                        method: "POST",
                        body: JSON.stringify({
                            email: document.getElementById('email').value,
                            password: document.getElementById('password').value,
                        }),
                        headers: {
                        "Content-type": "application/json; charset=UTF-8"
                        }
                    })
                    .then(response => response.json())
                    .then(data => {
                        if (data == "success"){
                            alert("Welcome back!");
                            window.location.replace("/provider-portal/provider-dashboard.html");
                        }
                        else{
                            alert("Incorrect credentials! Please try again.");
                        }
                    })
                    .catch(error => {
                         console.error('Error:', error);
                    });
            }
        </script>



        <div class ="ResetPasswordPrompt">
                <!-- Make this a link in the future. 
                Must also have a reset PW page -->
            <h4><a href="ForgotPassword.html">Forgot Password?</a></h4>
        </div>
        <!--  -->
        <div class = "signup-prompt">
            <h3>Not a member? <a href="Signup.html">Sign up now</a></h3>
            <h3></h3>
        </div>
        <h4><a href="LogIn.html">Client Login</a></h4>

    </main>

    <footer>
        <h5>Â© Copyright 2023 by the SOEN287 Project Team. <br> All rights reserved.</h5>
    </footer>
</body>
</html>
